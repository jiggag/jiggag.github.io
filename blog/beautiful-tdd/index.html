<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.88bfdd443e73d3e6d82f.css" data-identity="gatsby-global-css">*{font-family:SUIT Variable,sans-serif!important}:root{--surface:silver;--content:#e2e2e2;--button-highlight:#fff;--button-face:#dfdfdf;--button-shadow:grey;--window-frame:#0a0a0a;--dialog-blue:navy;--dialog-blue-light:#1084d0;--dialog-gray:grey;--dialog-gray-light:#b5b5b5;--link-blue:#00f;--black:#000;--link-blue-95:#0000ff95;--element-spacing:8px;--border-width:1px;--border-raised-outer:inset -1px -1px var(--window-frame),inset 1px 1px var(--button-highlight);--border-raised-inner:inset -2px -2px var(--button-shadow),inset 2px 2px var(--button-face);--border-sunken-outer:inset -1px -1px var(--button-highlight),inset 1px 1px var(--window-frame);--border-sunken-inner:inset -2px -2px var(--button-face),inset 2px 2px var(--button-shadow);--border-window-outer:inset -1px -1px var(--window-frame),inset 1px 1px var(--button-face);--border-window-inner:inset -2px -2px var(--button-shadow),inset 2px 2px var(--button-highlight)}body{margin:0}pre{background:var(--button-highlight);box-shadow:var(--border-sunken-outer),var(--border-sunken-inner);display:block;margin:4px 0;padding:var(--element-spacing)}pre code{background:unset;color:unset;font-size:12px}code{background:var(--link-blue-95);border-radius:10px;color:#fff;font-size:14px;padding:0 6px}a{color:var(--link-blue);text-decoration:none}.window{background:var(--surface);box-shadow:var(--border-window-outer),var(--border-window-inner);height:100vh;margin:auto}.window.minimize{max-width:500px}.window-container{display:flex;flex-direction:column;height:100%}.window-body{flex:1 1;margin:0 0 0 var(--element-spacing);overflow:auto;padding-right:var(--element-spacing)}.title-bar{align-items:center;background:linear-gradient(150deg,var(--dialog-blue),var(--dialog-blue-light));display:flex;justify-content:space-between;margin:3px 3px 0;padding:2px var(--element-spacing)}.title-bar .title{color:#fff;font-size:24px;margin:0;text-decoration:none}.title-bar-controls{display:flex}.title-bar-controls button{display:block;min-height:14px;min-width:16px;padding:0}.title-bar-controls button[aria-label=ScrollToTop]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE3Ij48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDZIN3YxSDZ2MUg1djFINHYxaDdWOWgtMVY4SDlWN0g4VjZaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=);background-position:bottom 2px left 2px;background-repeat:no-repeat;height:20px;width:20px}.title-bar-controls button[aria-label=Minimize]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2IiBoZWlnaHQ9IjIiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCA2IDIiPjxyZWN0IHdpZHRoPSI2IiBoZWlnaHQ9IjIiIGZpbGw9IiMwMDAiLz48L3N2Zz4=);background-position:bottom 5px left 7px;background-repeat:no-repeat;height:19px;width:20px}.title-bar-controls button[aria-label=Maximize]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5IiBoZWlnaHQ9IjkiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCA5IDkiPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTkgMEgwdjloOVYwWk04IDJIMXY2aDdWMloiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==);background-position:top 5px left 5px;background-repeat:no-repeat;height:19px;width:20px}.title-bar-controls button[aria-label=Close]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCA4IDciPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTAgMGgydjFoMXYxaDJWMWgxVjBoMnYxSDd2MUg2djFINXYxaDF2MWgxdjFoMXYxSDZWNkg1VjVIM3YxSDJ2MUgwVjZoMVY1aDFWNGgxVjNIMlYySDFWMUgwVjBaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=);background-position:top 5px left 5px;background-repeat:no-repeat;height:19px;margin-left:2px;width:20px}.title-bar-text{color:#fff;font-weight:700;letter-spacing:0;margin-right:24px}.blog-post-container{background:var(--content);box-shadow:var(--border-sunken-outer),var(--border-sunken-inner);margin:var(--element-spacing) 0 0 0;overflow-x:scroll;padding:var(--element-spacing)}.blog-post-content h1,h2{font-size:20px}.blog-post-content h3,h4{font-size:16px}.blog-post-content ul{padding-left:20px}.home-post-title{box-shadow:var(--border-sunken-outer),var(--border-sunken-inner);margin:var(--element-spacing) 0;padding:var(--element-spacing)}.home-post-title p{font-size:12px;margin:4px 0}.footer{align-items:center;display:flex;padding:12px 15px}.footer .footer-label{align-self:flex-end;font-size:12px;width:100%}.not-found-title{box-shadow:var(--border-sunken-outer),var(--border-sunken-inner);margin:var(--element-spacing) 0;padding:var(--element-spacing)}.not-found-title p{font-size:14px;margin:10px 0}button{background:var(--surface);border:none;border-radius:0;box-shadow:var(--border-raised-outer),var(--border-raised-inner);box-sizing:border-box;min-height:23px;min-width:75px;padding:0 12px}button:not(:disabled):active{box-shadow:var(--border-sunken-outer),var(--border-sunken-inner);padding:2px 3px 0 13px}@media (not(hover)){button:not(:disabled):hover{box-shadow:var(--border-sunken-outer),var(--border-sunken-inner)}}button:focus{outline:1px dotted var(--black);outline-offset:-4px}button::-moz-focus-inner{border:0}::-webkit-scrollbar{width:16px}::-webkit-scrollbar:horizontal{height:17px}::-webkit-scrollbar-corner{background:var(--button-face)}::-webkit-scrollbar-track{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyIiBoZWlnaHQ9IjIiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyIDIiPjxwYXRoIGZpbGw9InNpbHZlciIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMSAwSDB2MWgxdjFoMVYxSDFWMFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIgMEgxdjFIMHYxaDFWMWgxVjBaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}::-webkit-scrollbar-thumb{background-color:var(--button-face);box-shadow:var(--border-raised-outer),var(--border-raised-inner)}::-webkit-scrollbar-button:horizontal:end:increment,::-webkit-scrollbar-button:horizontal:start:decrement,::-webkit-scrollbar-button:vertical:end:increment,::-webkit-scrollbar-button:vertical:start:decrement{display:block}::-webkit-scrollbar-button:vertical:start{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE3Ij48cGF0aCBmaWxsPSIjREZERkRGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNSAwSDB2MTZoMVYxaDE0VjBaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yIDFIMXYxNGgxVjJoMTJWMUgyWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTYgMTdIMHYtMWgxNVYwaDF2MTdaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSJncmF5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNSAxaC0xdjE0SDF2MWgxNFYxWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHJlY3Qgd2lkdGg9IjEyIiBoZWlnaHQ9IjEzIiB4PSIyIiB5PSIyIiBmaWxsPSJzaWx2ZXIiLz48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDZIN3YxSDZ2MUg1djFINHYxaDdWOWgtMVY4SDlWN0g4VjZaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=);height:17px}::-webkit-scrollbar-button:vertical:end{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE3Ij48cGF0aCBmaWxsPSIjREZERkRGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNSAwSDB2MTZoMVYxaDE0VjBaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yIDFIMXYxNGgxVjJoMTJWMUgyWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTYgMTdIMHYtMWgxNVYwaDF2MTdaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSJncmF5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNSAxaC0xdjE0SDF2MWgxNFYxWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHJlY3Qgd2lkdGg9IjEyIiBoZWlnaHQ9IjEzIiB4PSIyIiB5PSIyIiBmaWxsPSJzaWx2ZXIiLz48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMSA2SDR2MWgxdjFoMXYxaDF2MWgxVjloMVY4aDFWN2gxVjZaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=);height:17px}::-webkit-scrollbar-button:horizontal:start{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE3Ij48cGF0aCBmaWxsPSIjREZERkRGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNSAwSDB2MTZoMVYxaDE0VjBaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yIDFIMXYxNGgxVjJoMTJWMUgyWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTYgMTdIMHYtMWgxNVYwaDF2MTdaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSJncmF5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNSAxaC0xdjE0SDF2MWgxNFYxWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHJlY3Qgd2lkdGg9IjEyIiBoZWlnaHQ9IjEzIiB4PSIyIiB5PSIyIiBmaWxsPSJzaWx2ZXIiLz48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik05IDRIOHYxSDd2MUg2djFINXYxaDF2MWgxdjFoMXYxaDFWNFoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==);width:16px}::-webkit-scrollbar-button:horizontal:end{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE3Ij48cGF0aCBmaWxsPSIjREZERkRGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNSAwSDB2MTZoMVYxaDE0VjBaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yIDFIMXYxNGgxVjJoMTJWMUgyWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTYgMTdIMHYtMWgxNVYwaDF2MTdaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSJncmF5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNSAxaC0xdjE0SDF2MWgxNFYxWiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHJlY3Qgd2lkdGg9IjEyIiBoZWlnaHQ9IjEzIiB4PSIyIiB5PSIyIiBmaWxsPSJzaWx2ZXIiLz48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDRINnY3aDF2LTFoMVY5aDFWOGgxVjdIOVY2SDhWNUg3VjRaIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=);width:16px}.table-of-contents{border:1px dashed var(--link-blue-95);border-radius:10px;display:inline-flex;padding:10px 30px 20px 15px}.table-of-contents ul{list-style:none;margin:0;padding:0}.table-of-contents>ul>li{margin:10px 0}.table-of-contents>ul>li>a>code{font-size:14px;font-weight:700}.table-of-contents>ul>li>ul{margin:5px 0;padding-left:10px}.table-of-contents>ul>li li{margin-bottom:2px}.table-of-contents code{background:unset;border-bottom:1px solid var(--link-blue-95);border-radius:0;color:var(--black);font-size:12px}</style><meta name="generator" content="Gatsby 4.1.4"/><title data-react-helmet="true">TDD 아름다운 도전이였다 | JIGGAG</title><meta data-react-helmet="true" name="description" content="직각어깨를 꿈꾸는 개발자"/><meta data-react-helmet="true" property="og:title" content="TDD 아름다운 도전이였다"/><meta data-react-helmet="true" property="og:description" content="직각어깨를 꿈꾸는 개발자"/><meta data-react-helmet="true" property="og:type" content="website"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script data-gatsby="web-vitals-polyfill">
            !function(){var e,t,n,i,r={passive:!0,capture:!0},a=new Date,o=function(){i=[],t=-1,e=null,f(addEventListener)},c=function(i,r){e||(e=r,t=i,n=new Date,f(removeEventListener),u())},u=function(){if(t>=0&&t<n-a){var r={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};i.forEach((function(e){e(r)})),i=[]}},s=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){c(e,t),a()},i=function(){a()},a=function(){removeEventListener("pointerup",n,r),removeEventListener("pointercancel",i,r)};addEventListener("pointerup",n,r),addEventListener("pointercancel",i,r)}(t,e):c(t,e)}},f=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,s,r)}))},p="hidden"===document.visibilityState?0:1/0;addEventListener("visibilitychange",(function e(t){"hidden"===document.visibilityState&&(p=t.timeStamp,removeEventListener("visibilitychange",e,!0))}),!0);o(),self.webVitals={firstInputPolyfill:function(e){i.push(e),u()},resetFirstInputPolyfill:o,get firstHiddenTime(){return p}}}();
          </script><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>            
              (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-4711551515762404",
                enable_page_level_ads: true
              });
          </script><link as="script" rel="preload" href="/webpack-runtime-0fbc006468ecd0e380ed.js"/><link as="script" rel="preload" href="/framework-094b0089736b8f621f0d.js"/><link as="script" rel="preload" href="/app-b09e07e25d90c38eb055.js"/><link as="script" rel="preload" href="/commons-fba08f0dde7e26234785.js"/><link as="script" rel="preload" href="/component---src-pages-markdown-remark-frontmatter-slug-tsx-b578fbfaba7e485ee7df.js"/><link as="fetch" rel="preload" href="/page-data/blog/beautiful-tdd/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3293771174.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/static/woff2/SUIT.css" rel="stylesheet"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="window minimize"><div class="window-container"><header class="title-bar"><a class="title title-bar-text" href="/">JIGGAG</a><div class="title-bar-controls"><button type="button" aria-label="ScrollToTop"></button><button type="button" aria-label="Maximize"></button><button type="button" aria-label="Close"></button></div></header><main class="window-body"><div class="blog-post-container"><div class="blog-post-header"><h3>TDD 아름다운 도전이였다</h3><h6>2022년 1월 9일</h6></div><div class="blog-post-content"><h3 id="그동안의-테스트" style="position:relative;"><a href="#%EA%B7%B8%EB%8F%99%EC%95%88%EC%9D%98-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-label="그동안의 테스트 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>그동안의 테스트</h3>
<p>항상 계획에만 존재하는 것, <code>테스트 코드 작성하기</code>이다.</p>
<p>그러나 이번에 더미 데이터로 확인하는데 한계가 있는 여러 케이스를 확인해보고자
<code>테스트를 작성해 두면 마음이 편안해질 수 있겠지</code> 하며 테스트 코드를 작성한 것이 시작이였다.
(아마 데이터가 충분했다면 그냥 지나갔을지 모른다)</p>
<p>그동안 작성한 테스트 코드는 단순한 유틸, 비즈니스 로직을 확인하는 정도였고 컴포넌트 렌더링 테스트도 해봤다고 하기 쑥쓰러운 수준이다.
모든게 완료된 후 로직 검증 및 리팩터링, 훗날의 코드 지킴이를 위한 차원에서 작성한 것들이 대부분이라
<code>해본적이 없는 건 아니지만 해봤다고 하기 민망한</code> 그 사이 어디쯤이다.</p>
<hr>
<h3 id="그렇게-시작한-도전기" style="position:relative;"><a href="#%EA%B7%B8%EB%A0%87%EA%B2%8C-%EC%8B%9C%EC%9E%91%ED%95%9C-%EB%8F%84%EC%A0%84%EA%B8%B0" aria-label="그렇게 시작한 도전기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>그렇게 시작한 도전기</h3>
<p>이번에도 마찬가지로 비즈니스 로직, 헬퍼 함수를 테스트하고 있었다.
하지만 비즈니스 로직은 커스텀 훅으로 분리하는 작업을 하다보니 테스트 코드 작성하는게 조금 불편하다고 느껴졌다.</p>
<p>훅을 테스트하는게 아니라면 훅 안에서 사용하는 로직만 따로 분리해서 다시 테스트를 해야하는데, 그럼 불필요하게 코드가 분리되는 모양이 되었다.</p>
<p>그리고 이 훅을 사용하는 컴포넌트에서 훅이 반환하는 결과에 따라 레이아웃이 변경되는 것도 테스트하면 좋겠다고 생각이 들고 있었다.</p>
<pre><code class="language-tsx">// useCustomHook.test.tsx
import useCustomHook from './useCustomHook';

...

it('커스텀 훅 테스트', () => {
  const customHook = useCustomHook({ value: 0 });
  expect(customHook.value).toBe(1);
});
</code></pre>
<p>근데 이처럼 훅을 테스트하려고 하면 <code>Error: Invalid hook call. Hooks can only be called inside of the body of a function component.</code> 에러가 발생하였다.
훅을 테스트하려면 임의의 컴포넌트로 래핑해서 호출해야하는 것이였다.</p>
<p>하지만 매번 훅을 감싸고 훅의 반환값을 상태로 갖는 컴포넌트를 만들어서 확인하는 것은 너무 귀찮다고 생각이 들었는데,
커스텀 훅을 테스트할 수 있는 라이브러리가 당연히 있었고 그렇게 <a href="https://github.com/testing-library/react-hooks-testing-library">@testing-library/react-hooks</a> 를 이용해보기로 하였다.</p>
<hr>
<h3 id="testing-libraryreact-hooks" style="position:relative;"><a href="#testing-libraryreact-hooks" aria-label="testing libraryreact hooks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@testing-library/react-hooks</h3>
<pre><code class="language-tsx">import { renderHook, act } from '@testing-library/react-hooks';
import useCustomHook from './useCustomHook';

interface CustomHook {
  value: number;
  increment: () => void;
}

it('커스텀 훅 테스트', () => {
  const { result } = renderHook(useCustomHook, { initialProps: {
    value: 1,  
  }});
  expect(result.current.value).toBe(1);


  act(() => {
    result.current.increment();
  })
  
  expect(result.current.value).toBe(2);
})
</code></pre>
<p>예시처럼 <code>renderHook</code>으로 테스트하고자 하는 훅을 감싸면 <a href="https://react-hooks-testing-library.com/reference/api#renderhook-result"><code>RenderHookResult</code></a> 을 반환하는데, 훅의 반환값이 <code>result.current</code>에 들어가게 된다.</p>
<p>어떻게 훅을 테스트할 수 있게 되었을까?</p>
<p><a href="https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/native/pure.ts#L8"><code>renderHook</code></a> 내부적으로 <a href="https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/helpers/createTestHarness.tsx#L6">컴포넌트 래핑하는 구조</a> 로 보인다.
(<a href="https://react-hooks-testing-library.com/installation#renderer">여기</a> 서 친절하게도 이미 렌더러에 대해 이야기해주고 있었다)
모든건 라이브러리가 해주니 온전히 커스텀 훅 로직 테스트만 할 수 있게 되었다.</p>
<p>훅의 상태를 업데이트하는 무언가를 호출한다면 <a href="https://reactjs.org/docs/test-utils.html#act"><code>act</code></a> 로 감싸서 업데이트를 확인할 수 있었다.
리액트 사이클을 동작하는 것처럼 만들어주는 모양이다. (비동기 처리에 대해서는 <a href="https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/core/asyncUtils.ts#L39"><code>act</code>를 한번 더 래핑한 <code>waitFor*</code></a> 를 사용해야한다)</p>
<p>그렇다면 왜 <code>result.current</code> 형태를 갖게 되었을까?</p>
<p><a href="https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/helpers/createTestHarness.tsx#L11">커스텀 훅을 래핑한 컴포넌트</a> 에서 렌더링 될 때 마다 <code>setValue</code> 업데이트가 진행되는데, 이를 실제 상태 업데이트가 아니라 <code>result.current</code>가 참조하고 있는 <code>value</code>에 단순히 배열을 추가하는 형태이다(<code>mutable</code>).</p>
<p>따라서 <code>const { value } = result.current</code> 로 분해해서 사용하게 되면 <a href="https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/core/index.ts#L7"><code>result.current</code></a> 는 테스트 훅이 렌더링 될 때 마다 새로 추가된 값을 들고 있지만 <code>value</code>는 분해 시점에 할당된 값을 반환하게 된다.
(항상 <code>result.current.value</code>를 해야하는 이유이다)</p>
<pre><code class="language-tsx">const { result, rerender } = renderHook(() => useCustomHook({ value: 2 }));
const { result } = renderHook(useCustomHook, {
  initialProps: {
    value: 2,
  }
});
const { result } = renderHook(({ value }) => useCustomHook(value), {
  initialProps: {
    value: 2,
  },
  wrapper: ({ children }) => &#x3C;>{children}&#x3C;/>,
});
</code></pre>
<p>다양한 형태로 <code>renderHook</code>을 사용할 수 있는데, <code>renderHook</code>이 반환하는 <code>rerender</code>는 어떤 상황에서 써야하는 것일까?</p>
<p>일반적으로 훅 상태가 업데이트 되는 상황이라면 내부 함수를 호출할텐데, <code>rerender</code>가 필요한 시점은 언제일까?
훅을 사용하는 외부 상황이 변경되었을때, 훅의 콜백 상태 또는 <code>cleanup</code>(<code>unmount</code>라는 함수로 따로 테스트 할 수 있다)을 테스트하고자 리렌더를 필요로 하게 된다.</p>
<p>내부 상태 업데이트 함수를 호출할때에는 <code>act</code>로 감싸는 것과 다르게, <code>rerender</code>는 업데이트된 <code>props</code>를 파라미터로 넘겨주는 (실제 훅이 다시 렌더되는 것 처럼) <code>rerender({ value: 0 })</code> 형태로 호출하기만 하면 된다.<br>
(변경된 props를 넘기지 않았더니 처음 renderHook을 호출한 props가 그대로 유지되었다)</p>
<pre><code class="language-tsx">expect(result.current.value).toBe(2);

rerender(); // 이렇게만 호출하면 초기 상태 그대로 props가 업데이트 되지 않았다 
expect(result.current.value).toBe(2);

rerender({ value: 99 });
expect(result.current.value).toBe(99);
</code></pre>
<p>그 외에 <code>renderHook</code>의 옵션으로 <code>wrapper</code>가 있는데, 이는 훅을 래핑할 수 있는 옵션이다.
예시에서는 <code>Context.Provider</code>가 나왔는데, 다른 컴포넌트로 래핑할 수 있을 듯 하다. (그럴거면 그냥 컴포넌트를 테스트하는게 좋지 않을까)</p>
<hr>
<h3 id="모든-훅을-테스트할-수-있을-것-같다" style="position:relative;"><a href="#%EB%AA%A8%EB%93%A0-%ED%9B%85%EC%9D%84-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%A0-%EC%88%98-%EC%9E%88%EC%9D%84-%EA%B2%83-%EA%B0%99%EB%8B%A4" aria-label="모든 훅을 테스트할 수 있을 것 같다 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>모든 훅을 테스트할 수 있을 것 같다</h3>
<p>그러나 모든 커스텀 훅을 <code>@testing-library/react-hooks</code>으로 테스트 해야하는 것은 아니다.
<a href="https://react-hooks-testing-library.com/#the-solution">여기</a> 에 쓰여있는 것처럼 <code>단순하거나 단 하나의 컴포넌트에서만 쓰이는 훅</code>이라면 컴포넌트 자체를 테스트하는 것이 더 좋다고 생각한다.</p>
<p>복잡한 비즈니스 로직이 포함된 경우나 컴포넌트와 연결되지 않는 커스텀 훅이라면 훅만 따로 테스트하는 것이 좀 더 명확하게 확인 할 수 있을 것이다.</p>
<p>(이것저것 다 테스트 해보기 전에 정리할 수 있어서 다행이다)</p>
<hr>
<h3 id="아름답게-시작한-컴포넌트-테스트" style="position:relative;"><a href="#%EC%95%84%EB%A6%84%EB%8B%B5%EA%B2%8C-%EC%8B%9C%EC%9E%91%ED%95%9C-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-label="아름답게 시작한 컴포넌트 테스트 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>아름답게 시작한 컴포넌트 테스트</h3>
<p>하다보니 <code>컴포넌트 렌더링 테스트도 할 수 있겠는데?</code> 하는 알 수 없는 자신감이 부풀어 <code>TDD를 한번 해봐야지!</code> 라는 마음에 도달하였다.</p>
<p>그동안 컴포넌트 테스트하는 척 사용했던 <a href="https://github.com/callstack/react-native-testing-library">@testing-library/react-native</a> (콜스택 👍) 를 이용해서
<code>안되면 빼면 되지!</code> 하는 마음으로 최대한 부담없이 시작은 해보려고 하였다. (여기까지가 아름다웠던 것 같다)</p>
<p>컴포넌트 스냅샷 말고는 별다른 테스트를 하고 있지 않았고, 그나마 해봤다고 하기에는 지금 돌아보면 별다른 의미가 없었던 (커스텀 훅이나 비즈니스 로직으로 테스트했다면 필요하지 않았을) 텍스트가 잘 렌더링 되는지 정도였다.</p>
<p>그렇기 때문에 컴포넌트 테스트를 시작하기 위해서 <code>컴포넌트를 어떻게 테스트할 수 있는거지?</code>를 알아보아야했다.
콜스택의 <a href="https://callstack.github.io/react-native-testing-library/">문서</a> 잘되어있었고 안되는거 뺴고 쓸 줄 모르는거 빼고 다 되는 것 같았다!</p>
<p>막연하게 시작하려고 하니 <code>testId</code>를 사용해서 해야하는 것 같은데, 그걸 찾으려면 <code>getByTestId</code>나 <code>queryByTestId</code>로 하면 될 것 같은 느낌이다.
(❌문서를 읽는 것보다) 먼저 <code>getByTestId</code>로 찾은 컴포넌트 엘리먼트를 가져온다는 것을 시험해봤는데, 당연하게도 에러가 발생했다.</p>
<pre><code class="language-tsx">import { render } from '@testing-library/react-native';

const Component = ({ isVisible = false }) => {
  return isVisible ? (
    &#x3C;View testId="component">
      &#x3C;Text>test&#x3C;/Text>
    &#x3C;/View>
  ) : null;
};

it('컴포넌트 테스트', () => {
  const {
    getByTestId,
  } = render(&#x3C;Component />);

  expect(getByTestId('component')).toBeFalsy();
});
</code></pre>
<p>전달된 props가 없었으니 <code>Component</code>는 null을 반환하고 <code>testId='component'</code>의 엘리먼트를 찾지 못했기 때문에 <code>falsy</code>하다고 테스트를 작성하면 될 것 같았다.
그러나 이 테스트는 <code>Error: Unable to find an element with testID: component</code> 에러를 내뿜으며 실패했다.</p>
<p>왜? 찾지 못한게 맞는데 에러가 나는거지?</p>
<hr>
<h3 id="testing-libraryreact-native" style="position:relative;"><a href="#testing-libraryreact-native" aria-label="testing libraryreact native permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@testing-library/react-native</h3>
<p>우선 실패하는 케이스에서 사용했던 것들 먼저 확인해본다.</p>
<p><code>render</code>는 예상했던대로 컴포넌트를 렌더링 시켜주고 있었다.</p>
<pre><code class="language-tsx">import { render } from '@testing-library/react-native';

it('컴포넌트 테스트', () => {
  const { toJSON, queryByTestId } = render(&#x3C;Component />, {
    wrapper: ({ children }) => &#x3C;Wrapper>{children}&#x3C;/Wrapper>,
    createNodeMock: (element) => {
      // 테스트하는 컴포넌트의 ref를 제어한다
      return null;
    },
  });

  expect(toJSON()).toMatchSnapshot();
  expect(queryByTestId('component')).not.toBe(null);
  expect(queryByTestId('fake_component')).toBe(null);
});
</code></pre>
<p><code>@testing-library/react-native</code>의 <code>render</code> 옵션에는 <code>wrapper</code>와 <code>createNodeMock</code> 두가지가 있는데,
<code>wrapper</code>는 <code>renderHook</code>의 <code>wrapper</code>와 동일하고 <code>createNodeMock</code>는 <a href="https://ko.reactjs.org/docs/test-renderer.html#ideas">예시</a> 처럼 <code>DOM ref</code>를 커스텀하는 역할을 하고 있다.</p>
<p>그렇다면 렌더링된 컴포넌트 안에서 확인하고자하는 <code>testId</code>의 엘리먼트 인스턴스를 가져와야하는데, <a href="https://testing-library.com/docs/queries/about#types-of-queries">여기</a> 에 써있듯 다양한 형태의 쿼리(<code>get, query, find</code>)가 존재하고 각각의 쿼리가 반환하는 형태에 따라 <code>어떤 목적으로, 어떤 결과를 테스트할 것인지</code> 적절하게 사용해야한다.</p>
<p>쿼리마다 반환하는 형태를 확인하고나니 왜 에러를 내뿜으며 실패했는지 알 수 있었다...</p>
<p><code>getBy*</code>는 엘리먼트를 찾지 못하면 에러를 던지고, <code>queryBy*</code>는 null을 반환하게 된다.
<code>getBy*</code>와 <code>findBy*</code>는 반환하는 형태는 동일한데, <code>retry</code> 여부가 차이가 있었다. (get하느냐 find하느냐의 의미와 통한다고 생각한다)</p>
<hr>
<h3 id="여러가지-옵션이-있는데" style="position:relative;"><a href="#%EC%97%AC%EB%9F%AC%EA%B0%80%EC%A7%80-%EC%98%B5%EC%85%98%EC%9D%B4-%EC%9E%88%EB%8A%94%EB%8D%B0" aria-label="여러가지 옵션이 있는데 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>여러가지 옵션이 있는데</h3>
<p>컴포넌트 렌더링을 테스트하다보니 이벤트가 발생했을때 변경되는 컴포넌트도 추가로 확인하고 싶어졌다.
<code>이미지 로드되는 순간을 어떻게 트래킹할 수 있지?</code> 생각하고 있었는데, <code>fireEvent</code>를 이용해 해결할 수 있었다.</p>
<pre><code class="language-tsx">import { fireEvent, render } from '@testing-library/react-native';

it('컴포넌트 테스트', () => {
  const { queryByTestId } = render(&#x3C;RenderImage />);
  
  expect(queryByTestId('image_label')).toBe('loading...');
  fireEvent(queryByTestId('image') as ReactTestInstance, 'onLoad');
  expect(queryByTestId('image_label')).toBe('loaded');
});
</code></pre>
<p>쓰다보니 <code>ByText, ByLabel, ByRole...</code> 여러가지가 있는데 계속 <code>ByTestId</code>만 사용하고 있다!
내가 확인하고 싶은 엘리먼트를 가장 명확하게 접근할 수 있어서 인 것 같은데, 텍스트만 가져와서 테스트하고 싶을때 써봐야지!</p>
<p><a href="https://github.com/callstack/react-native-testing-library/blob/main/src/__tests__/render.test.js">testing-library render 테스트 코드 예시</a> 를 보는 것도 재미있었다!
(그럼에도 <code>debug</code>는 어떤 용도로 쓸 수 있을지 생각이 이어지지 않고 있다...)</p>
<hr>
<h3 id="어김없이-눈이-가는" style="position:relative;"><a href="#%EC%96%B4%EA%B9%80%EC%97%86%EC%9D%B4-%EB%88%88%EC%9D%B4-%EA%B0%80%EB%8A%94" aria-label="어김없이 눈이 가는 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>어김없이 눈이 가는</h3>
<p>혹시나 설마하며 <a href="https://callstack.github.io/react-native-testing-library/docs/eslint-plugin-testing-library">eslint-plugin-testing-library</a>... <code>lint</code>는 없는 것이 없다!</p>
<p>필요하다고 생각이 드는 시점을 단순하게 생각해보면, 예시로 나와있듯 <code>testID</code> 컨벤션을 유지하기 위한 것 아닐까</p>
<hr>
<h3 id="내-친구-시나리오" style="position:relative;"><a href="#%EB%82%B4-%EC%B9%9C%EA%B5%AC-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4" aria-label="내 친구 시나리오 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>내 친구 시나리오</h3>
<p>이런 테스트 과정을 통해 컴포넌트 스냅샷, 초기 상태와 사용자의 동작에 따라 업데이트된 상태를 확인할 수 있었다.</p>
<p>또한 중간에 변경되는 로직을 확인하기 위해 <code>테스트 시나리오는 내 친구</code>를 경험해봤기 때문에 믿고 시작했고 역시나 이번에도 도움을 주었다.</p>
<p>그러나 여기서 놓치고 지나갔던 부분을 리뷰를 통해 다시 돌아볼 수 있었는데, 비즈니스 로직을 모두 훅으로 분리한 상태에서 <code>컴포넌트를 테스트해야지</code> 하는 욕심으로 <code>불필요한 테스트 코드</code>를 작성하고 있었다.
컴포넌트가 갖고 있는 상태가 모두 커스텀 훅에 의존하고 있었기 때문에, 훅을 테스트하는 것만으로도 검증할 수 있었던 것이였다.</p>
<p>위에 <code>단순하거나 단 하나의 컴포넌트에서만 쓰이는 훅이라면 컴포넌트 자체를 테스트하는 것이 좋겠다</code>와 같은 맥락으로 복잡한 컴포넌트이지만 비즈니스 로직을 담고 있는 커스텀 훅을 테스트를 통해 검증했다면 그에 따르는 컴포넌트를 중복해서 테스트할 필요가 없지 않을까?</p>
<p><a href="https://testing-library.com/docs/#the-problem">참고: @testing-library의 솔루션</a></p>
<hr>
<h3 id="그래서-갑자기-마무리" style="position:relative;"><a href="#%EA%B7%B8%EB%9E%98%EC%84%9C-%EA%B0%91%EC%9E%90%EA%B8%B0-%EB%A7%88%EB%AC%B4%EB%A6%AC" aria-label="그래서 갑자기 마무리 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>그래서 갑자기 마무리</h3>
<p><code>함께 자라기</code>에 <code>의도적 수련</code>이라는 내용이 있다.
지루함과 불안함 그 사이, 몰입이라는 단계의 전략을 가져가는 것이다.
(수련이 되었는지는 모르겠지만) 이 의도를 가지고 시작하였는데, 생각만큼 아름답게 되지는 않았던 것 같고 마음의 수련을 더 많이 한 것 같다.</p>
<p>테스트 코드를 추가한 것 만으로도 이미 적절한 난이도를 추가했다고 스스로 생각해보며 시작은 <code>TDD 도전기</code>였는데,
TDD를 했다고 하기 보다는 <code>테스트 알아보기</code> 라고 느껴진다.</p>
<p>시작은 TDD였는데, 어느 순간 T가 있는듯 없는듯 있긴 하지만 DD는 하고 있지 않는 그런 사이?</p>
<p>도전한다고 아름답게 되지는 않았다.
그냥 DD 빼고 T만이라도 함께 하는 것이 아름다운 도전이였다고 소박하게 생각해본다 🙈</p>
<p>(+ 한참 정리를 하고 있던 중간에 <a href="https://devowen.com/431">테스팅 라이브러리란?</a> 번역 글이 올라왔는데, 너무 타이밍 적절하여 좋았다!)</p></div></div></main><footer class="footer"><div class="footer-label">©Jiggag, Built with <a href="https://www.gatsbyjs.com">Gatsby</a></div><button type="button" aria-label="Github">Github</button></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-115373374-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/beautiful-tdd/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-635a9dfd597478a1f0fa.js"],"app":["/app-b09e07e25d90c38eb055.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-168a7ecda92120439b43.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-56ac5eb6f68a10947a02.js"],"component---src-pages-markdown-remark-frontmatter-slug-tsx":["/component---src-pages-markdown-remark-frontmatter-slug-tsx-b578fbfaba7e485ee7df.js"],"component---src-pages-using-ssr-tsx":["/component---src-pages-using-ssr-tsx-a3849e895b554ed9c74d.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-2c91f22b06497815d93c.js"],"component---src-templates-using-dsg-tsx":["/component---src-templates-using-dsg-tsx-96c55d73ae3a8c0dec54.js"]};/*]]>*/</script><script src="/polyfill-635a9dfd597478a1f0fa.js" nomodule=""></script><script src="/component---src-pages-markdown-remark-frontmatter-slug-tsx-b578fbfaba7e485ee7df.js" async=""></script><script src="/commons-fba08f0dde7e26234785.js" async=""></script><script src="/app-b09e07e25d90c38eb055.js" async=""></script><script src="/framework-094b0089736b8f621f0d.js" async=""></script><script src="/webpack-runtime-0fbc006468ecd0e380ed.js" async=""></script></body></html>