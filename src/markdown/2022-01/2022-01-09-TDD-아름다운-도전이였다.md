---
slug: /blog/beautiful-tdd
date: 2022-01-09
layout: post
published: true
title: TDD μ•„λ¦„λ‹¤μ΄ λ„μ „μ΄μ€λ‹¤
subtitle: μ•„λ¦„λ‹µκ² λ„μ „μ—λ§ λ¨Έλ¬΄λ¥΄λ” κ²ƒλ„ μΆ‹μ§€λ§
tags: [tdd, testing-library]
---

### κ·Έλ™μ•μ ν…μ¤νΈ

ν•­μƒ κ³„νμ—λ§ μ΅΄μ¬ν•λ” κ²ƒ, `ν…μ¤νΈ μ½”λ“ μ‘μ„±ν•κΈ°`μ΄λ‹¤.

κ·Έλ¬λ‚ μ΄λ²μ— λ”λ―Έ λ°μ΄ν„°λ΅ ν™•μΈν•λ”λ° ν•κ³„κ°€ μλ” μ—¬λ¬ μΌ€μ΄μ¤λ¥Ό ν™•μΈν•΄λ³΄κ³ μ
`ν…μ¤νΈλ¥Ό μ‘μ„±ν•΄ λ‘λ©΄ λ§μμ΄ νΈμ•ν•΄μ§ μ μκ² μ§€` ν•λ©° ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν• κ²ƒμ΄ μ‹μ‘μ΄μ€λ‹¤.
(μ•„λ§ λ°μ΄ν„°κ°€ μ¶©λ¶„ν–λ‹¤λ©΄ κ·Έλƒ¥ μ§€λ‚κ°”μ„μ§€ λ¨λ¥Έλ‹¤)

κ·Έλ™μ• μ‘μ„±ν• ν…μ¤νΈ μ½”λ“λ” λ‹¨μν• μ ν‹Έ, λΉ„μ¦λ‹μ¤ λ΅μ§μ„ ν™•μΈν•λ” μ •λ„μ€κ³  μ»΄ν¬λ„νΈ λ λ”λ§ ν…μ¤νΈλ„ ν•΄λ΄¤λ‹¤κ³  ν•κΈ° μ‘¥μ“°λ¬μ΄ μμ¤€μ΄λ‹¤.
λ¨λ“ κ² μ™„λ£λ ν›„ λ΅μ§ κ²€μ¦ λ° λ¦¬ν©ν„°λ§, ν›—λ‚ μ μ½”λ“ μ§€ν‚΄μ΄λ¥Ό μ„ν• μ°¨μ›μ—μ„ μ‘μ„±ν• κ²ƒλ“¤μ΄ λ€λ¶€λ¶„μ΄λΌ
`ν•΄λ³Έμ μ΄ μ—†λ” κ±΄ μ•„λ‹μ§€λ§ ν•΄λ΄¤λ‹¤κ³  ν•κΈ° λ―Όλ§ν•` κ·Έ μ‚¬μ΄ μ–΄λ””μ―¤μ΄λ‹¤.

---

### κ·Έλ ‡κ² μ‹μ‘ν• λ„μ „κΈ°

μ΄λ²μ—λ„ λ§μ°¬κ°€μ§€λ΅ λΉ„μ¦λ‹μ¤ λ΅μ§, ν—¬νΌ ν•¨μλ¥Ό ν…μ¤νΈν•κ³  μμ—λ‹¤.
ν•μ§€λ§ λΉ„μ¦λ‹μ¤ λ΅μ§μ€ μ»¤μ¤ν…€ ν›…μΌλ΅ λ¶„λ¦¬ν•λ” μ‘μ—…μ„ ν•λ‹¤λ³΄λ‹ ν…μ¤νΈ μ½”λ“ μ‘μ„±ν•λ”κ² μ΅°κΈ λ¶νΈν•λ‹¤κ³  λκ»΄μ΅λ‹¤.

ν›…μ„ ν…μ¤νΈν•λ”κ² μ•„λ‹λΌλ©΄ ν›… μ•μ—μ„ μ‚¬μ©ν•λ” λ΅μ§λ§ λ”°λ΅ λ¶„λ¦¬ν•΄μ„ λ‹¤μ‹ ν…μ¤νΈλ¥Ό ν•΄μ•Όν•λ”λ°, κ·ΈλΌ λ¶ν•„μ”ν•κ² μ½”λ“κ°€ λ¶„λ¦¬λλ” λ¨μ–‘μ΄ λμ—λ‹¤.

κ·Έλ¦¬κ³  μ΄ ν›…μ„ μ‚¬μ©ν•λ” μ»΄ν¬λ„νΈμ—μ„ ν›…μ΄ λ°ν™ν•λ” κ²°κ³Όμ— λ”°λΌ λ μ΄μ•„μ›ƒμ΄ λ³€κ²½λλ” κ²ƒλ„ ν…μ¤νΈν•λ©΄ μΆ‹κ² λ‹¤κ³  μƒκ°μ΄ λ“¤κ³  μμ—λ‹¤.

```tsx
// useCustomHook.test.tsx
import useCustomHook from './useCustomHook';

...

it('μ»¤μ¤ν…€ ν›… ν…μ¤νΈ', () => {
  const customHook = useCustomHook({ value: 0 });
  expect(customHook.value).toBe(1);
});
```

κ·Όλ° μ΄μ²λΌ ν›…μ„ ν…μ¤νΈν•λ ¤κ³  ν•λ©΄ `Error: Invalid hook call. Hooks can only be called inside of the body of a function component.` μ—λ¬κ°€ λ°μƒν•μ€λ‹¤.
ν›…μ„ ν…μ¤νΈν•λ ¤λ©΄ μ„μμ μ»΄ν¬λ„νΈλ΅ λν•‘ν•΄μ„ νΈμ¶ν•΄μ•Όν•λ” κ²ƒμ΄μ€λ‹¤.

ν•μ§€λ§ λ§¤λ² ν›…μ„ κ°μ‹Έκ³  ν›…μ λ°ν™κ°’μ„ μƒνƒλ΅ κ°–λ” μ»΄ν¬λ„νΈλ¥Ό λ§λ“¤μ–΄μ„ ν™•μΈν•λ” κ²ƒμ€ λ„λ¬΄ κ·€μ°®λ‹¤κ³  μƒκ°μ΄ λ“¤μ—λ”λ°,
μ»¤μ¤ν…€ ν›…μ„ ν…μ¤νΈν•  μ μλ” λΌμ΄λΈλ¬λ¦¬κ°€ λ‹Ήμ—°ν μμ—κ³  κ·Έλ ‡κ² [@testing-library/react-hooks](https://github.com/testing-library/react-hooks-testing-library) λ¥Ό μ΄μ©ν•΄λ³΄κΈ°λ΅ ν•μ€λ‹¤.

---

### @testing-library/react-hooks

```tsx
import { renderHook, act } from '@testing-library/react-hooks';
import useCustomHook from './useCustomHook';

interface CustomHook {
  value: number;
  increment: () => void;
}

it('μ»¤μ¤ν…€ ν›… ν…μ¤νΈ', () => {
  const { result } = renderHook(useCustomHook, {
    initialProps: {
      value: 1,
    },
  });
  expect(result.current.value).toBe(1);

  act(() => {
    result.current.increment();
  });

  expect(result.current.value).toBe(2);
});
```

μμ‹μ²λΌ `renderHook`μΌλ΅ ν…μ¤νΈν•κ³ μ ν•λ” ν›…μ„ κ°μ‹Έλ©΄ [`RenderHookResult`](https://react-hooks-testing-library.com/reference/api#renderhook-result) μ„ λ°ν™ν•λ”λ°, ν›…μ λ°ν™κ°’μ΄ `result.current`μ— λ“¤μ–΄κ°€κ² λλ‹¤.

μ–΄λ–»κ² ν›…μ„ ν…μ¤νΈν•  μ μκ² λμ—μ„κΉ?

[`renderHook`](https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/native/pure.ts#L8) λ‚΄λ¶€μ μΌλ΅ [μ»΄ν¬λ„νΈ λν•‘ν•λ” κµ¬μ΅°](https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/helpers/createTestHarness.tsx#L6) λ΅ λ³΄μΈλ‹¤.
([μ—¬κΈ°](https://react-hooks-testing-library.com/installation#renderer) μ„ μΉμ ν•κ²λ„ μ΄λ―Έ λ λ”λ¬μ— λ€ν•΄ μ΄μ•ΌκΈ°ν•΄μ£Όκ³  μμ—λ‹¤)
λ¨λ“ κ±΄ λΌμ΄λΈλ¬λ¦¬κ°€ ν•΄μ£Όλ‹ μ¨μ „ν μ»¤μ¤ν…€ ν›… λ΅μ§ ν…μ¤νΈλ§ ν•  μ μκ² λμ—λ‹¤.

ν›…μ μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ” λ¬΄μ–Έκ°€λ¥Ό νΈμ¶ν•λ‹¤λ©΄ [`act`](https://reactjs.org/docs/test-utils.html#act) λ΅ κ°μ‹Έμ„ μ—…λ°μ΄νΈλ¥Ό ν™•μΈν•  μ μμ—λ‹¤.
λ¦¬μ•΅νΈ μ‚¬μ΄ν΄μ„ λ™μ‘ν•λ” κ²ƒμ²λΌ λ§λ“¤μ–΄μ£Όλ” λ¨μ–‘μ΄λ‹¤. (λΉ„λ™κΈ° μ²λ¦¬μ— λ€ν•΄μ„λ” [`act`λ¥Ό ν•λ² λ” λν•‘ν• `waitFor*`](https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/core/asyncUtils.ts#L39) λ¥Ό μ‚¬μ©ν•΄μ•Όν•λ‹¤)

κ·Έλ ‡λ‹¤λ©΄ μ™ `result.current` ν•νƒλ¥Ό κ°–κ² λμ—μ„κΉ?

[μ»¤μ¤ν…€ ν›…μ„ λν•‘ν• μ»΄ν¬λ„νΈ](https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/helpers/createTestHarness.tsx#L11) μ—μ„ λ λ”λ§ λ  λ• λ§λ‹¤ `setValue` μ—…λ°μ΄νΈκ°€ μ§„ν–‰λλ”λ°, μ΄λ¥Ό μ‹¤μ  μƒνƒ μ—…λ°μ΄νΈκ°€ μ•„λ‹λΌ `result.current`κ°€ μ°Έμ΅°ν•κ³  μλ” `value`μ— λ‹¨μν λ°°μ—΄μ„ μ¶”κ°€ν•λ” ν•νƒμ΄λ‹¤(`mutable`).

λ”°λΌμ„ `const { value } = result.current` λ΅ λ¶„ν•΄ν•΄μ„ μ‚¬μ©ν•κ² λλ©΄ [`result.current`](https://github.com/testing-library/react-hooks-testing-library/blob/21a20baf4c92e94055d725ce96a29b73aa0fa9cd/src/core/index.ts#L7) λ” ν…μ¤νΈ ν›…μ΄ λ λ”λ§ λ  λ• λ§λ‹¤ μƒλ΅ μ¶”κ°€λ κ°’μ„ λ“¤κ³  μμ§€λ§ `value`λ” λ¶„ν•΄ μ‹μ μ— ν• λ‹Ήλ κ°’μ„ λ°ν™ν•κ² λλ‹¤.
(ν•­μƒ `result.current.value`λ¥Ό ν•΄μ•Όν•λ” μ΄μ μ΄λ‹¤)

```tsx
const { result, rerender } = renderHook(() => useCustomHook({ value: 2 }));
const { result } = renderHook(useCustomHook, {
  initialProps: {
    value: 2,
  },
});
const { result } = renderHook(({ value }) => useCustomHook(value), {
  initialProps: {
    value: 2,
  },
  wrapper: ({ children }) => <>{children}</>,
});
```

λ‹¤μ–‘ν• ν•νƒλ΅ `renderHook`μ„ μ‚¬μ©ν•  μ μλ”λ°, `renderHook`μ΄ λ°ν™ν•λ” `rerender`λ” μ–΄λ–¤ μƒν™©μ—μ„ μ¨μ•Όν•λ” κ²ƒμΌκΉ?

μΌλ°μ μΌλ΅ ν›… μƒνƒκ°€ μ—…λ°μ΄νΈ λλ” μƒν™©μ΄λΌλ©΄ λ‚΄λ¶€ ν•¨μλ¥Ό νΈμ¶ν• ν…λ°, `rerender`κ°€ ν•„μ”ν• μ‹μ μ€ μ–Έμ μΌκΉ?
ν›…μ„ μ‚¬μ©ν•λ” μ™Έλ¶€ μƒν™©μ΄ λ³€κ²½λμ—μ„λ•, ν›…μ μ½λ°± μƒνƒ λλ” `cleanup`(`unmount`λΌλ” ν•¨μλ΅ λ”°λ΅ ν…μ¤νΈ ν•  μ μλ‹¤)μ„ ν…μ¤νΈν•κ³ μ λ¦¬λ λ”λ¥Ό ν•„μ”λ΅ ν•κ² λλ‹¤.

λ‚΄λ¶€ μƒνƒ μ—…λ°μ΄νΈ ν•¨μλ¥Ό νΈμ¶ν• λ•μ—λ” `act`λ΅ κ°μ‹Έλ” κ²ƒκ³Ό λ‹¤λ¥΄κ², `rerender`λ” μ—…λ°μ΄νΈλ `props`λ¥Ό νλΌλ―Έν„°λ΅ λ„κ²¨μ£Όλ” (μ‹¤μ  ν›…μ΄ λ‹¤μ‹ λ λ”λλ” κ²ƒ μ²λΌ) `rerender({ value: 0 })` ν•νƒλ΅ νΈμ¶ν•κΈ°λ§ ν•λ©΄ λλ‹¤.  
(λ³€κ²½λ propsλ¥Ό λ„κΈ°μ§€ μ•μ•λ”λ‹ μ²μ renderHookμ„ νΈμ¶ν• propsκ°€ κ·Έλ€λ΅ μ μ§€λμ—λ‹¤)

```tsx
expect(result.current.value).toBe(2);

rerender(); // μ΄λ ‡κ²λ§ νΈμ¶ν•λ©΄ μ΄κΈ° μƒνƒ κ·Έλ€λ΅ propsκ°€ μ—…λ°μ΄νΈ λμ§€ μ•μ•λ‹¤
expect(result.current.value).toBe(2);

rerender({ value: 99 });
expect(result.current.value).toBe(99);
```

κ·Έ μ™Έμ— `renderHook`μ μµμ…μΌλ΅ `wrapper`κ°€ μλ”λ°, μ΄λ” ν›…μ„ λν•‘ν•  μ μλ” μµμ…μ΄λ‹¤.
μμ‹μ—μ„λ” `Context.Provider`κ°€ λ‚μ™”λ”λ°, λ‹¤λ¥Έ μ»΄ν¬λ„νΈλ΅ λν•‘ν•  μ μμ„ λ“― ν•λ‹¤. (κ·Έλ΄κ±°λ©΄ κ·Έλƒ¥ μ»΄ν¬λ„νΈλ¥Ό ν…μ¤νΈν•λ”κ² μΆ‹μ§€ μ•μ„κΉ)

---

### λ¨λ“  ν›…μ„ ν…μ¤νΈν•  μ μμ„ κ²ƒ κ°™λ‹¤

κ·Έλ¬λ‚ λ¨λ“  μ»¤μ¤ν…€ ν›…μ„ `@testing-library/react-hooks`μΌλ΅ ν…μ¤νΈ ν•΄μ•Όν•λ” κ²ƒμ€ μ•„λ‹λ‹¤.
[μ—¬κΈ°](https://react-hooks-testing-library.com/#the-solution) μ— μ“°μ—¬μλ” κ²ƒμ²λΌ `λ‹¨μν•κ±°λ‚ λ‹¨ ν•λ‚μ μ»΄ν¬λ„νΈμ—μ„λ§ μ“°μ΄λ” ν›…`μ΄λΌλ©΄ μ»΄ν¬λ„νΈ μμ²΄λ¥Ό ν…μ¤νΈν•λ” κ²ƒμ΄ λ” μΆ‹λ‹¤κ³  μƒκ°ν•λ‹¤.

λ³µμ΅ν• λΉ„μ¦λ‹μ¤ λ΅μ§μ΄ ν¬ν•¨λ κ²½μ°λ‚ μ»΄ν¬λ„νΈμ™€ μ—°κ²°λμ§€ μ•λ” μ»¤μ¤ν…€ ν›…μ΄λΌλ©΄ ν›…λ§ λ”°λ΅ ν…μ¤νΈν•λ” κ²ƒμ΄ μΆ€ λ” λ…ν™•ν•κ² ν™•μΈ ν•  μ μμ„ κ²ƒμ΄λ‹¤.

(μ΄κ²ƒμ €κ²ƒ λ‹¤ ν…μ¤νΈ ν•΄λ³΄κΈ° μ „μ— μ •λ¦¬ν•  μ μμ–΄μ„ λ‹¤ν–‰μ΄λ‹¤)

---

### μ•„λ¦„λ‹µκ² μ‹μ‘ν• μ»΄ν¬λ„νΈ ν…μ¤νΈ

ν•λ‹¤λ³΄λ‹ `μ»΄ν¬λ„νΈ λ λ”λ§ ν…μ¤νΈλ„ ν•  μ μκ² λ”λ°?` ν•λ” μ• μ μ—†λ” μμ‹ κ°μ΄ λ¶€ν’€μ–΄ `TDDλ¥Ό ν•λ² ν•΄λ΄μ•Όμ§€!` λΌλ” λ§μμ— λ„λ‹¬ν•μ€λ‹¤.

κ·Έλ™μ• μ»΄ν¬λ„νΈ ν…μ¤νΈν•λ” μ²™ μ‚¬μ©ν–λ [@testing-library/react-native](https://github.com/callstack/react-native-testing-library) (μ½μ¤νƒ π‘) λ¥Ό μ΄μ©ν•΄μ„
`μ•λλ©΄ λΉΌλ©΄ λμ§€!` ν•λ” λ§μμΌλ΅ μµλ€ν• λ¶€λ‹΄μ—†μ΄ μ‹μ‘μ€ ν•΄λ³΄λ ¤κ³  ν•μ€λ‹¤. (μ—¬κΈ°κΉμ§€κ°€ μ•„λ¦„λ‹¤μ› λ κ²ƒ κ°™λ‹¤)

μ»΄ν¬λ„νΈ μ¤λƒ…μƒ· λ§κ³ λ” λ³„λ‹¤λ¥Έ ν…μ¤νΈλ¥Ό ν•κ³  μμ§€ μ•μ•κ³ , κ·Έλ‚λ§ ν•΄λ΄¤λ‹¤κ³  ν•κΈ°μ—λ” μ§€κΈ λμ•„λ³΄λ©΄ λ³„λ‹¤λ¥Έ μλ―Έκ°€ μ—†μ—λ (μ»¤μ¤ν…€ ν›…μ΄λ‚ λΉ„μ¦λ‹μ¤ λ΅μ§μΌλ΅ ν…μ¤νΈν–λ‹¤λ©΄ ν•„μ”ν•μ§€ μ•μ•μ„) ν…μ¤νΈκ°€ μ λ λ”λ§ λλ”μ§€ μ •λ„μ€λ‹¤.

κ·Έλ ‡κΈ° λ•λ¬Έμ— μ»΄ν¬λ„νΈ ν…μ¤νΈλ¥Ό μ‹μ‘ν•κΈ° μ„ν•΄μ„ `μ»΄ν¬λ„νΈλ¥Ό μ–΄λ–»κ² ν…μ¤νΈν•  μ μλ”κ±°μ§€?`λ¥Ό μ•μ•„λ³΄μ•„μ•Όν–λ‹¤.
μ½μ¤νƒμ [λ¬Έμ„](https://callstack.github.io/react-native-testing-library/) μλμ–΄μμ—κ³  μ•λλ”κ±° λΊ΄κ³  μ“Έ μ¤„ λ¨λ¥΄λ”κ±° λΉΌκ³  λ‹¤ λλ” κ²ƒ κ°™μ•λ‹¤!

λ§‰μ—°ν•κ² μ‹μ‘ν•λ ¤κ³  ν•λ‹ `testId`λ¥Ό μ‚¬μ©ν•΄μ„ ν•΄μ•Όν•λ” κ²ƒ κ°™μ€λ°, κ·Έκ±Έ μ°ΎμΌλ ¤λ©΄ `getByTestId`λ‚ `queryByTestId`λ΅ ν•λ©΄ λ  κ²ƒ κ°™μ€ λλ‚μ΄λ‹¤.
(βλ¬Έμ„λ¥Ό μ½λ” κ²ƒλ³΄λ‹¤) λ¨Όμ € `getByTestId`λ΅ μ°Ύμ€ μ»΄ν¬λ„νΈ μ—λ¦¬λ¨ΌνΈλ¥Ό κ°€μ Έμ¨λ‹¤λ” κ²ƒμ„ μ‹ν—ν•΄λ΄¤λ”λ°, λ‹Ήμ—°ν•κ²λ„ μ—λ¬κ°€ λ°μƒν–λ‹¤.

```tsx
import { render } from '@testing-library/react-native';

const Component = ({ isVisible = false }) => {
  return isVisible ? (
    <View testId="component">
      <Text>test</Text>
    </View>
  ) : null;
};

it('μ»΄ν¬λ„νΈ ν…μ¤νΈ', () => {
  const { getByTestId } = render(<Component />);

  expect(getByTestId('component')).toBeFalsy();
});
```

μ „λ‹¬λ propsκ°€ μ—†μ—μΌλ‹ `Component`λ” nullμ„ λ°ν™ν•κ³  `testId='component'`μ μ—λ¦¬λ¨ΌνΈλ¥Ό μ°Ύμ§€ λ»ν–κΈ° λ•λ¬Έμ— `falsy`ν•λ‹¤κ³  ν…μ¤νΈλ¥Ό μ‘μ„±ν•λ©΄ λ  κ²ƒ κ°™μ•λ‹¤.
κ·Έλ¬λ‚ μ΄ ν…μ¤νΈλ” `Error: Unable to find an element with testID: component` μ—λ¬λ¥Ό λ‚΄λΏμΌλ©° μ‹¤ν¨ν–λ‹¤.

μ™? μ°Ύμ§€ λ»ν•κ² λ§λ”λ° μ—λ¬κ°€ λ‚λ”κ±°μ§€?

---

### @testing-library/react-native

μ°μ„  μ‹¤ν¨ν•λ” μΌ€μ΄μ¤μ—μ„ μ‚¬μ©ν–λ κ²ƒλ“¤ λ¨Όμ € ν™•μΈν•΄λ³Έλ‹¤.

`render`λ” μμƒν–λλ€λ΅ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ μ‹μΌμ£Όκ³  μμ—λ‹¤.

```tsx
import { render } from '@testing-library/react-native';

it('μ»΄ν¬λ„νΈ ν…μ¤νΈ', () => {
  const { toJSON, queryByTestId } = render(<Component />, {
    wrapper: ({ children }) => <Wrapper>{children}</Wrapper>,
    createNodeMock: (element) => {
      // ν…μ¤νΈν•λ” μ»΄ν¬λ„νΈμ refλ¥Ό μ μ–΄ν•λ‹¤
      return null;
    },
  });

  expect(toJSON()).toMatchSnapshot();
  expect(queryByTestId('component')).not.toBe(null);
  expect(queryByTestId('fake_component')).toBe(null);
});
```

`@testing-library/react-native`μ `render` μµμ…μ—λ” `wrapper`μ™€ `createNodeMock` λ‘κ°€μ§€κ°€ μλ”λ°,
`wrapper`λ” `renderHook`μ `wrapper`μ™€ λ™μΌν•κ³  `createNodeMock`λ” [μμ‹](https://ko.reactjs.org/docs/test-renderer.html#ideas) μ²λΌ `DOM ref`λ¥Ό μ»¤μ¤ν…€ν•λ” μ—­ν• μ„ ν•κ³  μλ‹¤.

κ·Έλ ‡λ‹¤λ©΄ λ λ”λ§λ μ»΄ν¬λ„νΈ μ•μ—μ„ ν™•μΈν•κ³ μν•λ” `testId`μ μ—λ¦¬λ¨ΌνΈ μΈμ¤ν„΄μ¤λ¥Ό κ°€μ Έμ™€μ•Όν•λ”λ°, [μ—¬κΈ°](https://testing-library.com/docs/queries/about#types-of-queries) μ— μ¨μλ“― λ‹¤μ–‘ν• ν•νƒμ μΏΌλ¦¬(`get, query, find`)κ°€ μ΅΄μ¬ν•κ³  κ°κ°μ μΏΌλ¦¬κ°€ λ°ν™ν•λ” ν•νƒμ— λ”°λΌ `μ–΄λ–¤ λ©μ μΌλ΅, μ–΄λ–¤ κ²°κ³Όλ¥Ό ν…μ¤νΈν•  κ²ƒμΈμ§€` μ μ ν•κ² μ‚¬μ©ν•΄μ•Όν•λ‹¤.

μΏΌλ¦¬λ§λ‹¤ λ°ν™ν•λ” ν•νƒλ¥Ό ν™•μΈν•κ³ λ‚λ‹ μ™ μ—λ¬λ¥Ό λ‚΄λΏμΌλ©° μ‹¤ν¨ν–λ”μ§€ μ• μ μμ—λ‹¤...

`getBy*`λ” μ—λ¦¬λ¨ΌνΈλ¥Ό μ°Ύμ§€ λ»ν•λ©΄ μ—λ¬λ¥Ό λμ§€κ³ , `queryBy*`λ” nullμ„ λ°ν™ν•κ² λλ‹¤.
`getBy*`μ™€ `findBy*`λ” λ°ν™ν•λ” ν•νƒλ” λ™μΌν•λ°, `retry` μ—¬λ¶€κ°€ μ°¨μ΄κ°€ μμ—λ‹¤. (getν•λλƒ findν•λλƒμ μλ―Έμ™€ ν†µν•λ‹¤κ³  μƒκ°ν•λ‹¤)

---

### μ—¬λ¬κ°€μ§€ μµμ…μ΄ μλ”λ°

μ»΄ν¬λ„νΈ λ λ”λ§μ„ ν…μ¤νΈν•λ‹¤λ³΄λ‹ μ΄λ²¤νΈκ°€ λ°μƒν–μ„λ• λ³€κ²½λλ” μ»΄ν¬λ„νΈλ„ μ¶”κ°€λ΅ ν™•μΈν•κ³  μ‹¶μ–΄μ΅λ‹¤.
`μ΄λ―Έμ§€ λ΅λ“λλ” μκ°„μ„ μ–΄λ–»κ² νΈλν‚Ήν•  μ μμ§€?` μƒκ°ν•κ³  μμ—λ”λ°, `fireEvent`λ¥Ό μ΄μ©ν•΄ ν•΄κ²°ν•  μ μμ—λ‹¤.

```tsx
import { fireEvent, render } from '@testing-library/react-native';

it('μ»΄ν¬λ„νΈ ν…μ¤νΈ', () => {
  const { queryByTestId } = render(<RenderImage />);

  expect(queryByTestId('image_label')).toBe('loading...');
  fireEvent(queryByTestId('image') as ReactTestInstance, 'onLoad');
  expect(queryByTestId('image_label')).toBe('loaded');
});
```

μ“°λ‹¤λ³΄λ‹ `ByText, ByLabel, ByRole...` μ—¬λ¬κ°€μ§€κ°€ μλ”λ° κ³„μ† `ByTestId`λ§ μ‚¬μ©ν•κ³  μλ‹¤!
λ‚΄κ°€ ν™•μΈν•κ³  μ‹¶μ€ μ—λ¦¬λ¨ΌνΈλ¥Ό κ°€μ¥ λ…ν™•ν•κ² μ ‘κ·Όν•  μ μμ–΄μ„ μΈ κ²ƒ κ°™μ€λ°, ν…μ¤νΈλ§ κ°€μ Έμ™€μ„ ν…μ¤νΈν•κ³  μ‹¶μ„λ• μ¨λ΄μ•Όμ§€!

[testing-library render ν…μ¤νΈ μ½”λ“ μμ‹](https://github.com/callstack/react-native-testing-library/blob/main/src/__tests__/render.test.js) λ¥Ό λ³΄λ” κ²ƒλ„ μ¬λ―Έμμ—λ‹¤!
(κ·ΈλΌμ—λ„ `debug`λ” μ–΄λ–¤ μ©λ„λ΅ μ“Έ μ μμ„μ§€ μƒκ°μ΄ μ΄μ–΄μ§€μ§€ μ•κ³  μλ‹¤...)

---

### μ–΄κΉ€μ—†μ΄ λμ΄ κ°€λ”

νΉμ‹λ‚ μ„¤λ§ν•λ©° [eslint-plugin-testing-library](https://callstack.github.io/react-native-testing-library/docs/eslint-plugin-testing-library)... `lint`λ” μ—†λ” κ²ƒμ΄ μ—†λ‹¤!

ν•„μ”ν•λ‹¤κ³  μƒκ°μ΄ λ“λ” μ‹μ μ„ λ‹¨μν•κ² μƒκ°ν•΄λ³΄λ©΄, μμ‹λ΅ λ‚μ™€μλ“― `testID` μ»¨λ²¤μ…μ„ μ μ§€ν•κΈ° μ„ν• κ²ƒ μ•„λ‹κΉ

---

### λ‚΄ μΉκµ¬ μ‹λ‚λ¦¬μ¤

μ΄λ° ν…μ¤νΈ κ³Όμ •μ„ ν†µν•΄ μ»΄ν¬λ„νΈ μ¤λƒ…μƒ·, μ΄κΈ° μƒνƒμ™€ μ‚¬μ©μμ λ™μ‘μ— λ”°λΌ μ—…λ°μ΄νΈλ μƒνƒλ¥Ό ν™•μΈν•  μ μμ—λ‹¤.

λν• μ¤‘κ°„μ— λ³€κ²½λλ” λ΅μ§μ„ ν™•μΈν•κΈ° μ„ν•΄ `ν…μ¤νΈ μ‹λ‚λ¦¬μ¤λ” λ‚΄ μΉκµ¬`λ¥Ό κ²½ν—ν•΄λ΄¤κΈ° λ•λ¬Έμ— λ―Ώκ³  μ‹μ‘ν–κ³  μ—­μ‹λ‚ μ΄λ²μ—λ„ λ„μ›€μ„ μ£Όμ—λ‹¤.

κ·Έλ¬λ‚ μ—¬κΈ°μ„ λ†“μΉκ³  μ§€λ‚κ°”λ λ¶€λ¶„μ„ λ¦¬λ·°λ¥Ό ν†µν•΄ λ‹¤μ‹ λμ•„λ³Ό μ μμ—λ”λ°, λΉ„μ¦λ‹μ¤ λ΅μ§μ„ λ¨λ‘ ν›…μΌλ΅ λ¶„λ¦¬ν• μƒνƒμ—μ„ `μ»΄ν¬λ„νΈλ¥Ό ν…μ¤νΈν•΄μ•Όμ§€` ν•λ” μ•μ‹¬μΌλ΅ `λ¶ν•„μ”ν• ν…μ¤νΈ μ½”λ“`λ¥Ό μ‘μ„±ν•κ³  μμ—λ‹¤.
μ»΄ν¬λ„νΈκ°€ κ°–κ³  μλ” μƒνƒκ°€ λ¨λ‘ μ»¤μ¤ν…€ ν›…μ— μμ΅΄ν•κ³  μμ—κΈ° λ•λ¬Έμ—, ν›…μ„ ν…μ¤νΈν•λ” κ²ƒλ§μΌλ΅λ„ κ²€μ¦ν•  μ μμ—λ κ²ƒμ΄μ€λ‹¤.

μ„μ— `λ‹¨μν•κ±°λ‚ λ‹¨ ν•λ‚μ μ»΄ν¬λ„νΈμ—μ„λ§ μ“°μ΄λ” ν›…μ΄λΌλ©΄ μ»΄ν¬λ„νΈ μμ²΄λ¥Ό ν…μ¤νΈν•λ” κ²ƒμ΄ μΆ‹κ² λ‹¤`μ™€ κ°™μ€ λ§¥λ½μΌλ΅ λ³µμ΅ν• μ»΄ν¬λ„νΈμ΄μ§€λ§ λΉ„μ¦λ‹μ¤ λ΅μ§μ„ λ‹΄κ³  μλ” μ»¤μ¤ν…€ ν›…μ„ ν…μ¤νΈλ¥Ό ν†µν•΄ κ²€μ¦ν–λ‹¤λ©΄ κ·Έμ— λ”°λ¥΄λ” μ»΄ν¬λ„νΈλ¥Ό μ¤‘λ³µν•΄μ„ ν…μ¤νΈν•  ν•„μ”κ°€ μ—†μ§€ μ•μ„κΉ?

[μ°Έκ³ : @testing-libraryμ μ†”λ£¨μ…](https://testing-library.com/docs/#the-problem)

---

### κ·Έλμ„ κ°‘μκΈ° λ§λ¬΄λ¦¬

`ν•¨κ» μλΌκΈ°`μ— `μλ„μ  μλ ¨`μ΄λΌλ” λ‚΄μ©μ΄ μλ‹¤.
μ§€λ£¨ν•¨κ³Ό λ¶μ•ν•¨ κ·Έ μ‚¬μ΄, λ°μ…μ΄λΌλ” λ‹¨κ³„μ μ „λµμ„ κ°€μ Έκ°€λ” κ²ƒμ΄λ‹¤.
(μλ ¨μ΄ λμ—λ”μ§€λ” λ¨λ¥΄κ² μ§€λ§) μ΄ μλ„λ¥Ό κ°€μ§€κ³  μ‹μ‘ν•μ€λ”λ°, μƒκ°λ§νΌ μ•„λ¦„λ‹µκ² λμ§€λ” μ•μ•λ κ²ƒ κ°™κ³  λ§μμ μλ ¨μ„ λ” λ§μ΄ ν• κ²ƒ κ°™λ‹¤.

ν…μ¤νΈ μ½”λ“λ¥Ό μ¶”κ°€ν• κ²ƒ λ§μΌλ΅λ„ μ΄λ―Έ μ μ ν• λ‚μ΄λ„λ¥Ό μ¶”κ°€ν–λ‹¤κ³  μ¤μ¤λ΅ μƒκ°ν•΄λ³΄λ©° μ‹μ‘μ€ `TDD λ„μ „κΈ°`μ€λ”λ°,
TDDλ¥Ό ν–λ‹¤κ³  ν•κΈ° λ³΄λ‹¤λ” `ν…μ¤νΈ μ•μ•„λ³΄κΈ°` λΌκ³  λκ»΄μ§„λ‹¤.

μ‹μ‘μ€ TDDμ€λ”λ°, μ–΄λ μκ°„ Tκ°€ μλ”λ“― μ—†λ”λ“― μκΈ΄ ν•μ§€λ§ DDλ” ν•κ³  μμ§€ μ•λ” κ·Έλ° μ‚¬μ΄?

λ„μ „ν•λ‹¤κ³  μ•„λ¦„λ‹µκ² λμ§€λ” μ•μ•λ‹¤.
κ·Έλƒ¥ DD λΉΌκ³  Tλ§μ΄λΌλ„ ν•¨κ» ν•λ” κ²ƒμ΄ μ•„λ¦„λ‹¤μ΄ λ„μ „μ΄μ€λ‹¤κ³  μ†λ°•ν•κ² μƒκ°ν•΄λ³Έλ‹¤ π™

(+ ν•μ°Έ μ •λ¦¬λ¥Ό ν•κ³  μλ μ¤‘κ°„μ— [ν…μ¤ν… λΌμ΄λΈλ¬λ¦¬λ€?](https://devowen.com/431) λ²μ—­ κΈ€μ΄ μ¬λΌμ™”λ”λ°, λ„λ¬΄ νƒ€μ΄λ° μ μ ν•μ—¬ μΆ‹μ•λ‹¤!)
